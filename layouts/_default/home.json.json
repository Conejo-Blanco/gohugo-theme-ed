{
  "version": "https://jsonfeed.org/version/1.1",
  "title": {{ (printf "%s JSON Feed" site.Title) | htmlUnescape | jsonify }},
  "home_page_url": {{ site.BaseURL  | absURL | jsonify }},
  {{ with .OutputFormats.Get "JSON" }}"feed_url": {{.Permalink | absURL | jsonify }},{{ end }}
  {{ with site.Params.description}}"description": {{site.Params.description | jsonify}},{{end}}
  {{- $logo := resources.Get (site.Params.assets.logo | default "/img/open-graph-logo.png" ) }}{{ $logo = $logo.Resize "96x96" }}
  "icon": {{ $logo.Permalink | jsonify }},
  "favicon": {{ $logo.Permalink | jsonify }},
  {{ with site.Author.name }}"authors": [
    {
      "name": {{ . | jsonify }}{{ with site.Author.twitter }},
      "url": {{ (printf "https://twitter.com/%s" . ) | jsonify }}{{ end }}
    }
  ],{{ end }}
  {{ with site.LanguageCode }}"language" : "{{ . }}",{{ end }}{{ $feedsize := site.Params.feedSize | default 25 }}
  "items": [{{ $r := first $feedsize (where site.RegularPages.ByDate.Reverse "Type" "in" site.Params.mainSections) }} {{ range $i, $ := $r }}{{ if $i }},{{ end }}
    {
      "id": {{ $uuid := sha1 (.Permalink  | absURL)}}"{{substr $uuid 0 8}}-{{substr $uuid 8 4}}-5{{substr $uuid 13 3}}-{{substr $uuid 16 1}}9{{substr $uuid 17 2}}-{{substr $uuid 21 12}}",
      "url": {{ .Permalink | jsonify  }},
      "title": {{ .Title   | plainify | chomp | jsonify }},
      "summary": {{ .Summary | plainify | chomp | jsonify }},
      "date_published": {{ .PublishDate.UTC.Format site.Params.dateFormatFeed | jsonify  }}{{ if ne .Date .Lastmod }},
      "date_modified" : {{ .Lastmod.UTC.Format site.Params.dateFormatFeed | jsonify  }}{{ end }}
    }
    {{- end}}
  ]
}
